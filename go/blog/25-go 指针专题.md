## 基本概念

### 变量

变量是一种占位符，用于引用计算机的内存地址，可以理解为`内存地址的标签`。

> 每个变量在运行时都拥有一个地址，这个地址代表变量在内存中的位置。

```go
var v string  //值类型， 若只声明不初始化，编译器根据类型会将其初始化为类型零值。此处v 的 值为 ""
var m []string // 引用类型, 若只声明不初始化, 其默认值为nil, 标志空指针
ptr := &v // v的类型为string
```



### 指针

*指针是存储另一个变量的内存地址的变量，它的值`存放的是另一个变量的内存地址`*

#### 两个概念

**内存地址**：一个内存地址表示操作系统管理的整个内存的中一个偏移量（相对于从整个内存的起始，以字节计数）。通常地，32位操作系统上占4个字节，在64位操作系统上占8个字节。内存地址的字面形式常用整数的十六进制字面量来表示，比如`0x1234CDEF`。

**值的地址**：一个值的地址是指此值的直接部分占据的内存的起始地址。在Go中，每个值都包含一个直接部分，但有些值可能还包含一个或多个间接部分，后面详述。

#### 什么是指针

指针是Go中的一种类型分类（kind）。`一个指针是某个指针类型的一个值`。一个指针可以存储一个内存地址。我们经常称一个指针为一个内存地址，或者称一个内存地址为一个指针。

通常地，一个指针此中存储的内存地址为另外一个值的地址。

#### 指针类型和值

一个非定义指针类型的字面形式为`*T`，其中`T`为一个任意类型。类型`T`称为指针类型`*T`的基类型。

指针类型的零值的字面量使用预声明的`nil`来表示。一个nil指针（常称为空指针）中不存储任何地址。

#### 为什么需要指针

1. 指针提供了一种间接的途径来访问和修改一些值。例如在参数传递中修改参数值，并在函数外使用修改后的值。

#### go中的指针特性

1. 函数返回其内声明的局部变量的地址是绝对安全的

   ```go
   func newInt() *int {
   	a := 3
   	return &a
   }
   ```

   

2. 指针不能参与数学运算，即指针不能偏移。

3. 一个指针类型的值不能被随意转换为另一个指针类型。
4. 非类型安全指针`unsafe.Pointer`可以打破上述3的安全限制，但不推荐使用