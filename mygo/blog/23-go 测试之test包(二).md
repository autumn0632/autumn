1. testing包
   - 测试代码须放在当前包以“_test.go”结尾的文件中
   - 测试函数以Test为名称前缀
   - 测试命令忽略以“_”或“.”开头的测试文件
   - 正常编译操作会忽略测试文件
   - 提供了专用类型T来控制测试结果和行为
     - Fail：失败，继续执行当前测试函数
     - FailNow：失败，立即终止执行当前函数
     - SkipNow：跳过，停止执行当前测试函数
     - Log：输出错误信息。仅失败或-v时输出
     - Error：Fail + Log
     - Fatal：FailNow + Log
   - 常用测试参数：
     - -args 命令行参数
     - -v 输出详细信息
     - -run 指定测试函数，正则表达式
     - 
2. go程序的三类测试：**功能测试（test）、基准测试（benchmark，也称性能测试）、以及示例测试（example）**
3. go语言对测试函数的名称和签名的规定
   - 对功能测试函数来说，名称必须以**Test**为前缀，并且参数列表中只应有一个**\*testing.T**类型的参数说明。
   - 对于性能测试函数来说，名称必须以**Benchmark**为前缀，并且唯一参数的类型必须是**\*testing.B**类型的
   - 对于示例测试函数来说，名称必须以**Example**为前缀，对函数的参数列表没有强制规定。
4. go test 

   - 只有测试源码文件的名称对了，测试函数的名称和签名也对了，执行go test时，测试代码才有可能运行。
   - go test准备工作：确定内部需要用到的命令，检查指定的代码包或源码文件的有效性
   - 执行：针对每个被测试代码包，依次地进行构建、执行包中符合要求的测试函数，清理临时文件，打印测试结果。


**性能测试**

```
$ go test -bench=. -run=^$ puzzlers/article20/q3
goos: darwin
goarch: amd64
pkg: puzzlers/article20/q3
BenchmarkGetPrimes-8      500000       2314 ns/op
PASS
ok   puzzlers/article20/q3 1.192s
```

`-bench=.`：进行性能测试的标记。标记值`.`表示执行任意名称的性能测试。

`-run=^$`：用于执行哪些功能测试的标记。标记值`^$`表示只执行名称为空的功能测试函数，即不执行任何功能测试函数。不加`-run`标记，表示执行所有功能测试函数

![](./png/go_test性能测试结果.png)

其它参数：

`-cpu`：设置执行最大p数量的列表（逻辑cpu的最大个数）

